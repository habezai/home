<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="cid:css-09022c98-a654-4ce2-a88f-8cec91f2b01b@mhtml.blink" />
    
    

    
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Language" content="zh-CN">
    <title>Learn JavaScript in Y Minutes</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&amp;family=Roboto+Slab:wght@100..900&amp;family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://learnxinyminutes.com/css/normalize.css">
    <link rel="stylesheet" href="https://learnxinyminutes.com/css/main.css">
    <link rel="stylesheet" href="https://learnxinyminutes.com/css/screen.css">
    <link rel="stylesheet" href="https://learnxinyminutes.com/css/light.css">
    <link rel="stylesheet" href="https://learnxinyminutes.com/css/dark.css">

    <link rel="canonical" href="https://learnxinyminutes.com/zh-cn/javascript/">
    
  </head>
  <body>
    <div class="container">
      <div class="share">
        <span class="sharemsg">
          <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fzh-cn%2Fjavascript%2F&amp;text=Y%E5%88%86%E9%92%9F%E9%80%9F%E6%88%90X%2C+%E5%85%B6%E4%B8%AD+X%3DJavaScript">
            分享此页
          </a>
        </span>
        <span class="st_facebook_large" displaytext="Facebook"></span>
        <span class="st_twitter_large" displaytext="Tweet"></span>
      </div>
      <h1><a href="https://learnxinyminutes.com/">Y分钟速成X</a></h1>
      <h2>其中 X=JavaScript</h2>
      <p class="filelink">
        源代码下载：
        <a href="https://learnxinyminutes.com/zh-cn/files/javascript.js">javascript.js</a>
      </p>
      <div id="doc">
<p>JavaScript 于 1995 年由网景公司的 Brendan Eich 发明。最初它作为一种简单的，用于开发网站的脚本语言而被发明出来，是用于开发复杂网站的 Java 的补充。但由于它与网页结合度很高并且在浏览器中得到内置的支持，所以在网页前端领域 JavaScript 变得比 Java 更流行了。</p>
<p>不过，JavaScript 不仅用于网页浏览器，一个名为 Node.js 的项目提供了面向 Google Chrome V8 引擎的独立运行时环境，它正在变得越来越流行。</p>
<div class="highlight"><pre lang="js"><span class="c1">// 注释方式和C很像，这是单行注释</span>
<span class="cm">/* 这是多行</span>
<span class="cm">   注释 */</span>

<span class="c1">// 语句可以以分号结束</span>
<span class="nx">doStuff</span><span class="p">();</span>

<span class="c1">// ... 但是分号也可以省略，每当遇到一个新行时，分号会自动插入（除了一些特殊情况）。</span>
<span class="nx">doStuff</span><span class="p">()</span>

<span class="c1">// 因为这些特殊情况会导致意外的结果，所以我们在这里保留分号。</span>

<span class="c1">///////////////////////////////////</span>
<span class="c1">// 1. 数字、字符串与操作符</span>

<span class="c1">// JavaScript 只有一种数字类型(即 64位 IEEE 754 双精度浮点 double)。</span>
<span class="c1">// double 有 52 位表示尾数，足以精确存储大到 9✕10¹⁵ 的整数。</span>
<span class="mf">3</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 3</span>
<span class="mf">1.5</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 1.5</span>

<span class="c1">// 所有基本的算数运算都如你预期。</span>
<span class="mf">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 2</span>
<span class="mf">0.1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.2</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 0.30000000000000004</span>
<span class="mf">8</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 7</span>
<span class="mf">10</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 20</span>
<span class="mf">35</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 7</span>

<span class="c1">// 包括无法整除的除法。</span>
<span class="mf">5</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 2.5</span>

<span class="c1">// 位运算也和其他语言一样；当你对浮点数进行位运算时，</span>
<span class="c1">// 浮点数会转换为*至多* 32 位的无符号整数。</span>
<span class="mf">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 4</span>

<span class="c1">// 括号可以决定优先级。</span>
<span class="p">(</span><span class="mf">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">3</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 8</span>

<span class="c1">// 有三种非数字的数字类型</span>
<span class="kc">Infinity</span><span class="p">;</span><span class="w"> </span><span class="c1">// 1/0 的结果</span>
<span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span><span class="w"> </span><span class="c1">// -1/0 的结果</span>
<span class="kc">NaN</span><span class="p">;</span><span class="w"> </span><span class="c1">// 0/0 的结果</span>

<span class="c1">// 也有布尔值。</span>
<span class="kc">true</span><span class="p">;</span>
<span class="kc">false</span><span class="p">;</span>

<span class="c1">// 可以通过单引号或双引号来构造字符串。</span>
<span class="s1">'abc'</span><span class="p">;</span>
<span class="s2">"Hello, world"</span><span class="p">;</span>

<span class="c1">// 用！来取非</span>
<span class="o">!</span><span class="kc">true</span><span class="p">;</span><span class="w"> </span><span class="c1">// = false</span>
<span class="o">!</span><span class="kc">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// = true</span>

<span class="c1">// 相等 ===</span>
<span class="mf">1</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// = true</span>
<span class="mf">2</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// = false</span>

<span class="c1">// 不等 !=</span>
<span class="mf">1</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// = false</span>
<span class="mf">2</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// = true</span>

<span class="c1">// 更多的比较操作符</span>
<span class="mf">1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span><span class="w"> </span><span class="c1">// = true</span>
<span class="mf">1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span><span class="w"> </span><span class="c1">// = false</span>
<span class="mf">2</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// = true</span>
<span class="mf">2</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// = true</span>

<span class="c1">// 字符串用+连接</span>
<span class="s2">"Hello "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"world!"</span><span class="p">;</span><span class="w"> </span><span class="c1">// = "Hello world!"</span>

<span class="c1">// 字符串也可以用 &lt; 、&gt; 来比较</span>
<span class="s2">"a"</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s2">"b"</span><span class="p">;</span><span class="w"> </span><span class="c1">// = true</span>

<span class="c1">// 使用“==”比较时会进行类型转换...</span>
<span class="s2">"5"</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span><span class="w"> </span><span class="c1">// = true</span>
<span class="kc">null</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">undefined</span><span class="p">;</span><span class="w"> </span><span class="c1">// = true</span>

<span class="c1">// ...除非你是用 ===</span>
<span class="s2">"5"</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span><span class="w"> </span><span class="c1">// = false</span>
<span class="kc">null</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="kc">undefined</span><span class="p">;</span><span class="w"> </span><span class="c1">// = false</span>

<span class="c1">// ...但会导致奇怪的行为</span>
<span class="mf">13</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">!</span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// 14</span>
<span class="s2">"13"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">!</span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// '13true'</span>

<span class="c1">// 你可以用`charAt`来得到字符串中的字符</span>
<span class="s2">"This is a string"</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span><span class="w">  </span><span class="c1">// = 'T'</span>

<span class="c1">// ...或使用 `substring` 来获取更大的部分。</span>
<span class="s2">"Hello world"</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">);</span><span class="w"> </span><span class="c1">// = "Hello"</span>

<span class="c1">// `length` 是一个属性，所以不要使用 ().</span>
<span class="s2">"Hello"</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 5</span>

<span class="c1">// 还有两个特殊的值：`null`和`undefined`</span>
<span class="kc">null</span><span class="p">;</span><span class="w">      </span><span class="c1">// 用来表示刻意设置的空值</span>
<span class="kc">undefined</span><span class="p">;</span><span class="w"> </span><span class="c1">// 用来表示还没有设置的值(尽管`undefined`自身实际是一个值)</span>

<span class="c1">// false, null, undefined, NaN, 0 和 "" 都是假的；其他的都视作逻辑真</span>
<span class="c1">// 注意 0 是逻辑假而  "0"是逻辑真，尽管 0 == "0"。</span>

<span class="c1">///////////////////////////////////</span>
<span class="c1">// 2. 变量、数组和对象</span>

<span class="c1">// 变量需要用`var`关键字声明。JavaScript是动态类型语言，</span>
<span class="c1">// 所以你无需指定类型。 赋值需要用 `=`</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">someVar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>

<span class="c1">// 如果你在声明时没有加var关键字，你也不会得到错误...</span>
<span class="nx">someOtherVar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span>

<span class="c1">// ...但是此时这个变量就会在全局作用域被创建，而非你定义的当前作用域</span>

<span class="c1">// 没有被赋值的变量都会被设置为undefined</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">someThirdVar</span><span class="p">;</span><span class="w"> </span><span class="c1">// = undefined</span>

<span class="c1">// 对变量进行数学运算有一些简写法：</span>
<span class="nx">someVar</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span><span class="w"> </span><span class="c1">// 等价于 someVar = someVar + 5; someVar 现在是 10</span>
<span class="nx">someVar</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span><span class="w"> </span><span class="c1">// 现在 someVar 是 100</span>

<span class="c1">// 自增和自减也有简写</span>
<span class="nx">someVar</span><span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="c1">// someVar 是 101</span>
<span class="nx">someVar</span><span class="o">--</span><span class="p">;</span><span class="w"> </span><span class="c1">// 回到 100</span>

<span class="c1">// 数组是任意类型组成的有序列表</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">myArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="mf">45</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">];</span>

<span class="c1">// 数组的元素可以用方括号下标来访问。</span>
<span class="c1">// 数组的索引从0开始。</span>
<span class="nx">myArray</span><span class="p">[</span><span class="mf">1</span><span class="p">];</span><span class="w"> </span><span class="c1">// = 45</span>

<span class="c1">// 数组是可变的，并拥有变量 length。</span>
<span class="nx">myArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">"World"</span><span class="p">);</span>
<span class="nx">myArray</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 4</span>

<span class="c1">// 在指定下标添加/修改</span>
<span class="nx">myArray</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Hello"</span><span class="p">;</span>

<span class="c1">// JavaScript中的对象相当于其他语言中的“字典”或“映射”：是键-值对的无序集合。</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">myObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">key1</span><span class="o">:</span><span class="w"> </span><span class="s2">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nx">key2</span><span class="o">:</span><span class="w"> </span><span class="s2">"World"</span><span class="p">};</span>

<span class="c1">// 键是字符串，但如果键本身是合法的js标识符，则引号并非是必须的。</span>
<span class="c1">// 值可以是任意类型。</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">myObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">myKey</span><span class="o">:</span><span class="w"> </span><span class="s2">"myValue"</span><span class="p">,</span><span class="w"> </span><span class="s2">"my other key"</span><span class="o">:</span><span class="w"> </span><span class="mf">4</span><span class="p">};</span>

<span class="c1">// 对象属性的访问可以通过下标</span>
<span class="nx">myObj</span><span class="p">[</span><span class="s2">"my other key"</span><span class="p">];</span><span class="w"> </span><span class="c1">// = 4</span>

<span class="c1">// ... 或者也可以用 . ，如果属性是合法的标识符</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">myKey</span><span class="p">;</span><span class="w"> </span><span class="c1">// = "myValue"</span>

<span class="c1">// 对象是可变的；值也可以被更改或增加新的键</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">myThirdKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="c1">// 如果你想要获取一个还没有被定义的值，那么会返回undefined</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">myFourthKey</span><span class="p">;</span><span class="w"> </span><span class="c1">// = undefined</span>

<span class="c1">///////////////////////////////////</span>
<span class="c1">// 3. 逻辑与控制结构</span>

<span class="c1">// 本节介绍的语法与Java的语法几乎完全相同</span>

<span class="c1">// `if`语句和其他语言中一样。</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">3</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// count 是 3 时执行</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">4</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// count 是 4 时执行</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 其他情况下执行</span>
<span class="p">}</span>

<span class="c1">// while循环</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 无限循环</span>
<span class="p">}</span>

<span class="c1">// Do-while 和 While 循环很像 ，但前者会至少执行一次</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">input</span><span class="p">;</span>
<span class="k">do</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getInput</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">isValid</span><span class="p">(</span><span class="nx">input</span><span class="p">))</span>

<span class="c1">// `for`循环和C、Java中的一样：</span>
<span class="c1">// 初始化; 继续执行的条件; 迭代。</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// 遍历5次</span>
<span class="p">}</span>

<span class="c1">// &amp;&amp; 是逻辑与, || 是逻辑或</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">house</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"big"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">house</span><span class="p">.</span><span class="nx">colour</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">){</span>
<span class="w">    </span><span class="nx">house</span><span class="p">.</span><span class="nx">contains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"bear"</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">colour</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"red"</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">colour</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// colour是red或者blue时执行</span>
<span class="p">}</span>

<span class="c1">// &amp;&amp; 和 || 是“短路”语句，它在设定初始化值时特别有用</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">otherName</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s2">"default"</span><span class="p">;</span>

<span class="c1">// `switch`语句使用`===`检查相等性。</span>
<span class="c1">// 在每一个case结束时使用 'break'</span>
<span class="c1">// 否则其后的case语句也将被执行。</span>
<span class="nx">grade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'B'</span><span class="p">;</span>
<span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">grade</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="s1">'A'</span><span class="o">:</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Great job"</span><span class="p">);</span>
<span class="w">    </span><span class="k">break</span><span class="p">;</span>
<span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="s1">'B'</span><span class="o">:</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"OK job"</span><span class="p">);</span>
<span class="w">    </span><span class="k">break</span><span class="p">;</span>
<span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="s1">'C'</span><span class="o">:</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"You can do better"</span><span class="p">);</span>
<span class="w">    </span><span class="k">break</span><span class="p">;</span>
<span class="w">  </span><span class="k">default</span><span class="o">:</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Oy vey"</span><span class="p">);</span>
<span class="w">    </span><span class="k">break</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">///////////////////////////////////</span>
<span class="c1">// 4. 函数、作用域、闭包</span>

<span class="c1">// JavaScript 函数由`function`关键字定义</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">myFunction</span><span class="p">(</span><span class="nx">thing</span><span class="p">){</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">thing</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
<span class="p">}</span>
<span class="nx">myFunction</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">);</span><span class="w"> </span><span class="c1">// = "FOO"</span>

<span class="c1">// 注意被返回的值必须开始于`return`关键字的那一行，</span>
<span class="c1">// 否则由于自动的分号补齐，你将返回`undefined`。</span>
<span class="c1">// 在使用Allman风格的时候要注意.</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">myFunction</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="c1">// &lt;- 分号自动插在这里</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">thisIsAn</span><span class="o">:</span><span class="w"> </span><span class="s1">'object literal'</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="nx">myFunction</span><span class="p">();</span><span class="w"> </span><span class="c1">// = undefined</span>

<span class="c1">// JavaScript中函数是一等对象，所以函数也能够赋给一个变量，</span>
<span class="c1">// 并且被作为参数传递 —— 比如一个事件处理函数：</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">myFunction</span><span class="p">(){</span>
<span class="w">    </span><span class="c1">// 这段代码将在5秒钟后被调用</span>
<span class="p">}</span>
<span class="nx">setTimeout</span><span class="p">(</span><span class="nx">myFunction</span><span class="p">,</span><span class="w"> </span><span class="mf">5000</span><span class="p">);</span>
<span class="c1">// 注意：setTimeout不是js语言的一部分，而是由浏览器和Node.js提供的。</span>

<span class="c1">// 函数对象甚至不需要声明名称 —— 你可以直接把一个函数定义写到另一个函数的参数中</span>
<span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
<span class="w">    </span><span class="c1">// 这段代码将在5秒钟后被调用</span>
<span class="p">},</span><span class="w"> </span><span class="mf">5000</span><span class="p">);</span>

<span class="c1">// JavaScript 有函数作用域；函数有其自己的作用域而其他的代码块则没有。</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">){</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">i</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 5 - 并非我们在其他语言中所期望得到的undefined</span>

<span class="c1">// 这就导致了人们经常使用的“立即执行匿名函数”的模式，</span>
<span class="c1">// 这样可以避免一些临时变量扩散到全局作用域去。</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">temporary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// 我们可以访问修改全局对象（"global object"）来访问全局作用域，</span>
<span class="w">    </span><span class="c1">// 在web浏览器中是`window`这个对象。</span>
<span class="w">    </span><span class="c1">// 在其他环境如Node.js中这个对象的名字可能会不同。</span>
<span class="w">    </span><span class="nb">window</span><span class="p">.</span><span class="nx">permanent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span>
<span class="p">})();</span>
<span class="nx">temporary</span><span class="p">;</span><span class="w"> </span><span class="c1">// 抛出引用异常ReferenceError</span>
<span class="nx">permanent</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 10</span>

<span class="c1">// JavaScript最强大的功能之一就是闭包。</span>
<span class="c1">// 如果一个函数在另一个函数中定义，那么这个内部函数就拥有外部函数的所有变量的访问权，</span>
<span class="c1">// 即使在外部函数结束之后。</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">sayHelloInFiveSeconds</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">prompt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Hello, "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"!"</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// 内部函数默认是放在局部作用域的，</span>
<span class="w">    </span><span class="c1">// 就像是用`var`声明的。</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">inner</span><span class="p">(){</span>
<span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="nx">prompt</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">inner</span><span class="p">,</span><span class="w"> </span><span class="mf">5000</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// setTimeout是异步的，所以 sayHelloInFiveSeconds 函数会立即退出，</span>
<span class="w">    </span><span class="c1">// 而 setTimeout 会在后面调用inner</span>
<span class="w">    </span><span class="c1">// 然而，由于inner是由sayHelloInFiveSeconds“闭合包含”的，</span>
<span class="w">    </span><span class="c1">// 所以inner在其最终被调用时仍然能够访问`prompt`变量。</span>
<span class="p">}</span>
<span class="nx">sayHelloInFiveSeconds</span><span class="p">(</span><span class="s2">"Adam"</span><span class="p">);</span><span class="w"> </span><span class="c1">// 会在5秒后弹出 "Hello, Adam!"</span>


<span class="c1">///////////////////////////////////</span>
<span class="c1">// 5. 对象、构造函数与原型</span>

<span class="c1">//  对象可以包含方法。</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">myObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">myFunc</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s2">"Hello world!"</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">myFunc</span><span class="p">();</span><span class="w"> </span><span class="c1">// = "Hello world!"</span>

<span class="c1">// 当对象中的函数被调用时，这个函数可以通过`this`关键字访问其依附的这个对象。</span>
<span class="nx">myObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">myString</span><span class="o">:</span><span class="w"> </span><span class="s2">"Hello world!"</span><span class="p">,</span>
<span class="w">    </span><span class="nx">myFunc</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">myString</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">myFunc</span><span class="p">();</span><span class="w"> </span><span class="c1">// = "Hello world!"</span>

<span class="c1">// 但这个函数访问的其实是其运行时环境，而非定义时环境，即取决于函数是如何调用的。</span>
<span class="c1">// 所以如果函数被调用时不在这个对象的上下文中，就不会运行成功了。</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">myFunc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">myObj</span><span class="p">.</span><span class="nx">myFunc</span><span class="p">;</span>
<span class="nx">myFunc</span><span class="p">();</span><span class="w"> </span><span class="c1">// = undefined</span>

<span class="c1">// 相应的，一个函数也可以被指定为一个对象的方法，并且可以通过`this`访问</span>
<span class="c1">// 这个对象的成员，即使在函数被定义时并没有依附在对象上。</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">myOtherFunc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">myString</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
<span class="p">}</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">myOtherFunc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">myOtherFunc</span><span class="p">;</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">myOtherFunc</span><span class="p">();</span><span class="w"> </span><span class="c1">// = "HELLO WORLD!"</span>

<span class="c1">// 当我们通过`call`或者`apply`调用函数的时候，也可以为其指定一个执行上下文。</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">anotherFunc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">myString</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">s</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">anotherFunc</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">myObj</span><span class="p">,</span><span class="w"> </span><span class="s2">" And Hello Moon!"</span><span class="p">);</span><span class="w"> </span><span class="c1">// = "Hello World! And Hello Moon!"</span>

<span class="c1">// `apply`函数几乎完全一样，只是要求一个array来传递参数列表。</span>
<span class="nx">anotherFunc</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">myObj</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s2">" And Hello Sun!"</span><span class="p">]);</span><span class="w"> </span><span class="c1">// = "Hello World! And Hello Sun!"</span>

<span class="c1">// 当一个函数接受一系列参数，而你想传入一个array时特别有用。</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mf">42</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">27</span><span class="p">);</span><span class="w"> </span><span class="c1">// = 6</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">([</span><span class="mf">42</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">27</span><span class="p">]);</span><span class="w"> </span><span class="c1">// = NaN (uh-oh!)</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nb">Math</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mf">42</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">27</span><span class="p">]);</span><span class="w"> </span><span class="c1">// = 6</span>

<span class="c1">// 但是`call`和`apply`只是临时的。如果我们希望函数附着在对象上，可以使用`bind`。</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">boundFunc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">anotherFunc</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">myObj</span><span class="p">);</span>
<span class="nx">boundFunc</span><span class="p">(</span><span class="s2">" And Hello Saturn!"</span><span class="p">);</span><span class="w"> </span><span class="c1">// = "Hello World! And Hello Saturn!"</span>

<span class="c1">// `bind` 也可以用来部分应用一个函数（柯里化）。</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">){</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">b</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">doubler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">product</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="nx">doubler</span><span class="p">(</span><span class="mf">8</span><span class="p">);</span><span class="w"> </span><span class="c1">// = 16</span>

<span class="c1">// 当你通过`new`关键字调用一个函数时，就会创建一个对象，</span>
<span class="c1">// 而且可以通过this关键字访问该函数。</span>
<span class="c1">// 设计为这样调用的函数就叫做构造函数。</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">MyConstructor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">myNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">myNewObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">MyConstructor</span><span class="p">();</span><span class="w"> </span><span class="c1">// = {myNumber: 5}</span>
<span class="nx">myNewObj</span><span class="p">.</span><span class="nx">myNumber</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 5</span>

<span class="c1">// 每一个js对象都有一个‘原型’。当你要访问一个实际对象中没有定义的一个属性时，</span>
<span class="c1">// 解释器就回去找这个对象的原型。</span>

<span class="c1">// 一些JS实现会让你通过`__proto__`属性访问一个对象的原型。</span>
<span class="c1">// 这虽然对理解原型很有用，但是它并不是标准的一部分；</span>
<span class="c1">// 我们后面会介绍使用原型的标准方式。</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">myObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">myString</span><span class="o">:</span><span class="w"> </span><span class="s2">"Hello world!"</span>
<span class="p">};</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">myPrototype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">meaningOfLife</span><span class="o">:</span><span class="w"> </span><span class="mf">42</span><span class="p">,</span>
<span class="w">    </span><span class="nx">myFunc</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">myString</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">myObj</span><span class="p">.</span><span class="nx">__proto__</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">myPrototype</span><span class="p">;</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">meaningOfLife</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 42</span>

<span class="c1">// 函数也可以工作。</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">myFunc</span><span class="p">()</span><span class="w"> </span><span class="c1">// = "hello world!"</span>

<span class="c1">// 当然，如果你要访问的成员在原型当中也没有定义的话，解释器就会去找原型的原型，以此类推。</span>
<span class="nx">myPrototype</span><span class="p">.</span><span class="nx">__proto__</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">myBoolean</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">};</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">myBoolean</span><span class="p">;</span><span class="w"> </span><span class="c1">// = true</span>

<span class="c1">// 这其中并没有对象的拷贝；每个对象实际上是持有原型对象的引用。</span>
<span class="c1">// 这意味着当我们改变对象的原型时，会影响到其他以这个原型为原型的对象。</span>
<span class="nx">myPrototype</span><span class="p">.</span><span class="nx">meaningOfLife</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">43</span><span class="p">;</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">meaningOfLife</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 43</span>

<span class="c1">// 我们知道 `__proto__` 并非标准规定，实际上也没有标准办法来修改一个已存在对象的原型。</span>
<span class="c1">// 然而，我们有两种方式为指定原型创建一个新的对象。</span>

<span class="c1">// 第一种方式是 Object.create，这个方法是在最近才被添加到Js中的，</span>
<span class="c1">// 因此并不是所有的JS实现都有这个方法</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">myObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">myPrototype</span><span class="p">);</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">meaningOfLife</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 43</span>

<span class="c1">// 第二种方式可以在任意版本中使用，不过必须通过构造函数。</span>
<span class="c1">// 构造函数有一个属性prototype。但是它 *不是* 构造函数本身的原型；相反，</span>
<span class="c1">// 是通过构造函数和new关键字创建的新对象的原型。</span>
<span class="nx">MyConstructor</span><span class="p">.</span><span class="nx">prototype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">myNumber</span><span class="o">:</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span>
<span class="w">    </span><span class="nx">getMyNumber</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">myNumber</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">myNewObj2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">MyConstructor</span><span class="p">();</span>
<span class="nx">myNewObj2</span><span class="p">.</span><span class="nx">getMyNumber</span><span class="p">();</span><span class="w"> </span><span class="c1">// = 5</span>
<span class="nx">myNewObj2</span><span class="p">.</span><span class="nx">myNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">6</span>
<span class="nx">myNewObj2</span><span class="p">.</span><span class="nx">getMyNumber</span><span class="p">();</span><span class="w"> </span><span class="c1">// = 6</span>

<span class="c1">// 字符串和数字等内置类型也有通过构造函数来创建的包装类型</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">myNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">12</span><span class="p">;</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">myNumberObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="mf">12</span><span class="p">);</span>
<span class="nx">myNumber</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">myNumberObj</span><span class="p">;</span><span class="w"> </span><span class="c1">// = true</span>

<span class="c1">// 但是它们并非严格等价</span>
<span class="ow">typeof</span><span class="w"> </span><span class="nx">myNumber</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 'number'</span>
<span class="ow">typeof</span><span class="w"> </span><span class="nx">myNumberObj</span><span class="p">;</span><span class="w"> </span><span class="c1">// = 'object'</span>
<span class="nx">myNumber</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">myNumberObj</span><span class="p">;</span><span class="w"> </span><span class="c1">// = false</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="mf">0</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// 这段代码不会执行，因为0代表假</span>
<span class="p">}</span>

<span class="c1">// 不过，包装类型和内置类型共享一个原型，</span>
<span class="c1">// 所以你实际可以给内置类型也增加一些功能，例如对string：</span>
<span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">firstCharacter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="p">}</span>
<span class="s2">"abc"</span><span class="p">.</span><span class="nx">firstCharacter</span><span class="p">();</span><span class="w"> </span><span class="c1">// = "a"</span>

<span class="c1">// 这个技巧经常用在“代码填充”中，来为老版本的JavaScript子集增加新版本js的特性，</span>
<span class="c1">// 这样就可以在老的浏览器中使用新功能了。</span>

<span class="c1">// 比如，我们知道Object.create并没有在所有的版本中都实现，</span>
<span class="c1">// 但是我们仍然可以通过“代码填充”来实现兼容：</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="kc">undefined</span><span class="p">){</span><span class="w"> </span><span class="c1">// 如果存在则不覆盖</span>
<span class="w">    </span><span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">proto</span><span class="p">){</span>
<span class="w">        </span><span class="c1">// 用正确的原型来创建一个临时构造函数</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">Constructor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(){};</span>
<span class="w">        </span><span class="nx">Constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">proto</span><span class="p">;</span>
<span class="w">        </span><span class="c1">// 之后用它来创建一个新的对象</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Constructor</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h2>更多阅读</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">Mozilla 开发者
网络</a> 提供了优秀的介绍
JavaScript如何在浏览器中使用的文档。而且它是wiki，所以你也可以自行编辑来分享你的知识。</p>
<p>MDN的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript">A re-introduction to
JavaScript</a>
覆盖了这里提到的绝大多数话题的细节。该导引的大多数内容被限定在只是JavaScript这个语言本身；
如果你想了解JavaScript是如何在网页中被应用的，那么可以查看
<a href="https://developer.mozilla.org/en-US/docs/Using_the_W3C_DOM_Level_1_Core">Document Object
Model</a></p>
<p><a href="https://shamansir.github.io/JavaScript-Garden/">JavaScript Garden</a> 是一个深入
讲解所有JavaScript反直觉部分的导引。</p>
<p><a href="http://www.amazon.com/gp/product/0596805527/">JavaScript: The Definitive Guide</a> 是一个经典的指导参考书。</p>
<p>除了这篇文章的直接贡献者之外，这篇文章也参考了这个网站上
Louie Dinh 的 Python 教程，以及 Mozilla开发者网络上的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript">JS
Tutorial</a>。</p>

        <hr>
        <p>
          有建议？或者发现什么错误？在GitHub上<a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">开一个issue</a>，或者发起<a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/zh-cn/javascript.md">pull request</a>！
        </p>
        <p class="contributed">
          原著Leigh Brenecki，并由<a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/zh-cn/javascript.md">8个好心人</a>修改。
        </p>

        <footer>
          <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0; width: 88px; height: 31px;" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by-sa.svg"></a>
          <p>
            © 2024
            <a href="https://leigh.net.au/">Leigh Brenecki</a>,
            <a href="http://www.learneroo.com/">Ariel Krakowski</a>
          </p>
        </footer>
      </div>
    </div>
  
</body><div id="immersive-translate-popup" style="all: initial"><template shadowmode="open"><div id="mount" style="display: block;"><div class="imt-fb-container right notranslate" style="z-index: 2147483647; pointer-events: none; top: 90.4619px; display: flex;"><div title="关闭悬浮球" class="btn-animate" style="transform: translateX(100%); padding: 4px; cursor: pointer;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_2589_9951)"><path d="M7 14C5.14348 14 3.36301 13.2625 2.05025 11.9497C0.737498 10.637 0 8.85652 0 7C0 5.14348 0.737498 3.36301 2.05025 2.05025C3.36301 0.737498 5.14348 0 7 0C8.85652 0 10.637 0.737498 11.9497 2.05025C13.2625 3.36301 14 5.14348 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM4.183 5.064L6.118 7L4.183 8.936C4.12409 8.99361 4.07719 9.06234 4.04502 9.1382C4.01285 9.21406 3.99605 9.29554 3.99559 9.37794C3.99513 9.46034 4.01101 9.54201 4.04234 9.61823C4.07366 9.69444 4.11978 9.76369 4.17805 9.82195C4.23631 9.88022 4.30556 9.92634 4.38177 9.95766C4.45799 9.98898 4.53966 10.0049 4.62206 10.0044C4.70446 10.004 4.78594 9.98715 4.8618 9.95498C4.93766 9.92281 5.00639 9.87591 5.064 9.817L7 7.882L8.936 9.817C9.05327 9.93168 9.21104 9.99548 9.37506 9.99457C9.53908 9.99365 9.69612 9.92809 9.8121 9.8121C9.92809 9.69612 9.99365 9.53908 9.99457 9.37506C9.99548 9.21104 9.93168 9.05327 9.817 8.936L7.882 7L9.817 5.064C9.87591 5.00639 9.92281 4.93766 9.95498 4.8618C9.98715 4.78594 10.004 4.70446 10.0044 4.62206C10.0049 4.53966 9.98898 4.45799 9.95766 4.38177C9.92634 4.30556 9.88022 4.23631 9.82195 4.17805C9.76369 4.11978 9.69444 4.07366 9.61823 4.04234C9.54201 4.01101 9.46034 3.99513 9.37794 3.99559C9.29554 3.99605 9.21406 4.01285 9.1382 4.04502C9.06234 4.07719 8.99361 4.12409 8.936 4.183L7 6.118L5.064 4.183C4.94673 4.06832 4.78896 4.00452 4.62494 4.00543C4.46092 4.00635 4.30388 4.07191 4.1879 4.1879C4.07191 4.30388 4.00635 4.46092 4.00543 4.62494C4.00452 4.78896 4.06832 4.94673 4.183 5.064Z" fill="#B1B1B1" fill-opacity="0.32"></path></g><defs><clipPath id="clip0_2589_9951"><rect width="14" height="14" fill="white"></rect></clipPath></defs></svg></div><div style="position: relative; pointer-events: all; display: inline-block;"><div><div class="imt-fb-btn  right btn-animate " style="transform: translateX(20px); opacity: 0.5;"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" class="imt-fb-logo-img"><path fill="none" d="M0 0h24v24H0z"></path><path d="M5 15v2a2 2 0 0 0 1.85 1.995L7 19h3v2H7a4 4 0 0 1-4-4v-2h2zm13-5l4.4 11h-2.155l-1.201-3h-4.09l-1.199 3h-2.154L16 10h2zm-1 2.885L15.753 16h2.492L17 12.885zM8 2v2h4v7H8v3H6v-3H2V4h4V2h2zm9 1a4 4 0 0 1 4 4v2h-2V7a2 2 0 0 0-2-2h-3V3h3zM6 6H4v3h2V6zm4 0H8v3h2V6z" fill="rgba(255,255,255,1)"></path></svg></div></div></div></div><div class="imt-fb-more-buttons btn-animate" style="margin-top: 12px; transform: translateX(60px);"><div class="btn-animate" style="position: relative; pointer-events: all; display: inline-block;"><div><div class="imt-fb-more-button"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.6861 1L15.2353 4.54635V7.11765V14.6471V15.5882C15.2353 15.9627 15.0866 16.3217 14.8218 16.5865C14.557 16.8513 14.198 17 13.8235 17H4.41176C4.03734 17 3.67825 16.8513 3.4135 16.5865C3.14874 16.3217 3 15.9627 3 15.5882V14.6471V7.11765V2.41176C3 2.03734 3.14874 1.67825 3.4135 1.4135C3.67825 1.14874 4.03734 1 4.41176 1H11.6861ZM11.8692 3.17882V4.74212H13.4334L11.8692 3.17882ZM4.41171 15.5882V14.647V2.41176H10.4574L10.4578 6.15341H13.8235V14.647V15.5882H4.41171ZM12.7739 7.51746H5.46094V8.6155H12.7739V7.51746ZM5.46094 9.98805H12.7739V11.0861H5.46094V9.98805ZM9.5127 12.36H5.46094V13.458H9.5127V12.36Z" fill="#6C6F73"></path></svg></div></div></div><div class="btn-animate" style="position: relative; pointer-events: all; display: inline-block;"><div><div class="imt-fb-more-button"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.55741 0L9.06847 0.00329403C9.84824 0.00470579 10.4802 0.636235 10.4812 1.41647L10.4821 1.82588C10.9687 2.0278 11.4297 2.28671 11.8553 2.59718L12.1913 2.40329C12.516 2.21676 12.9013 2.1665 13.2629 2.26352C13.6246 2.36055 13.933 2.59695 14.1207 2.92094L15.3795 5.09365C15.5601 5.40546 15.6149 5.7744 15.5328 6.12523C15.4507 6.47606 15.2378 6.78235 14.9376 6.98165L14.8609 7.02871L14.5235 7.22353C14.5819 7.76273 14.5736 8.30708 14.4986 8.84424L14.7372 8.98259C15.0496 9.16307 15.2812 9.45606 15.3848 9.80165C15.4884 10.1472 15.456 10.5193 15.2944 10.8419L15.2553 10.9153L14.076 12.9576C13.8955 13.27 13.6025 13.5017 13.2569 13.6053C12.9113 13.7088 12.5392 13.6765 12.2167 13.5148L12.1433 13.4753L11.8172 13.2871C11.4074 13.5817 10.9651 13.8283 10.4991 14.0221L10.4995 14.5831C10.5 14.9434 10.3629 15.2904 10.1163 15.5532C9.86972 15.816 9.53215 15.9748 9.17247 15.9972L9.08306 16L6.57153 15.9967C6.19697 15.9961 5.83793 15.847 5.57312 15.5821C5.30831 15.3172 5.15932 14.9581 5.15883 14.5835L5.15788 13.9073C4.76852 13.7244 4.39771 13.5044 4.05059 13.2504L3.44918 13.5967C3.12448 13.7834 2.73902 13.8337 2.37726 13.7367C2.01551 13.6397 1.70698 13.4032 1.5193 13.0791L0.260473 10.9064C0.0799611 10.5945 0.0252226 10.2255 0.107423 9.87467C0.189623 9.52384 0.402569 9.21757 0.702826 9.01835L0.779062 8.97129L1.3913 8.61835C1.34424 8.17129 1.34188 7.71765 1.38706 7.26494L0.707532 6.87247C0.395061 6.69207 0.163305 6.39911 0.0596515 6.05351C-0.0440025 5.70791 -0.0117246 5.33577 0.149885 5.01318L0.189415 4.93976L1.36871 2.89741C1.54919 2.58502 1.84218 2.35337 2.18777 2.2498C2.53336 2.14624 2.90547 2.17859 3.228 2.34023L3.30141 2.37976L3.89436 2.72188C4.28027 2.42082 4.69854 2.1637 5.14141 1.95529L5.14047 1.41694C5.14001 1.05657 5.27707 0.709596 5.52367 0.446813C5.77028 0.184029 6.10786 0.0252343 6.46753 0.00282354L6.55741 0ZM6.55553 1.41506L6.55694 2.85271L5.74377 3.23576C5.39553 3.39906 5.06706 3.60094 4.764 3.83718L4.01247 4.424L2.62941 3.62494L2.59365 3.60518L1.41483 5.64753L2.88636 6.49694L2.79506 7.40612C2.75968 7.7598 2.76078 8.11619 2.79836 8.46965L2.8953 9.38541L1.48494 10.1976L2.7433 12.3704L4.14377 11.5647L4.88636 12.1087C5.15997 12.309 5.45231 12.4823 5.7593 12.6264L6.57106 13.008L6.57388 14.5816L9.08447 14.5849L9.08306 13.0791L9.95553 12.7158C10.3216 12.5635 10.6689 12.3698 10.9908 12.1384L11.7329 11.6047L12.8506 12.2499L14.0289 10.2075L12.9654 9.592L13.0972 8.64847C13.1561 8.22659 13.1628 7.79904 13.1169 7.37553L13.0181 6.45882L14.1555 5.80235L12.8967 3.62965L11.7645 4.28235L11.0214 3.74024C10.686 3.4956 10.3229 3.29152 9.93953 3.13224L9.06894 2.77082L9.06659 1.41835L6.55553 1.41506ZM9.37153 5.47624C10.0214 5.85201 10.4955 6.47036 10.6898 7.19547C10.8841 7.92058 10.7827 8.69316 10.4078 9.34353C10.2223 9.66543 9.97517 9.9476 9.68053 10.1739C9.38589 10.4002 9.04953 10.5662 8.69068 10.6623C8.33183 10.7585 7.95754 10.7829 7.58923 10.7343C7.22092 10.6856 6.86582 10.5648 6.54424 10.3788C5.89445 10.003 5.4204 9.38458 5.2262 8.65948C5.032 7.93438 5.13352 7.16184 5.50847 6.51153C5.69395 6.18963 5.94107 5.90746 6.23571 5.68117C6.53034 5.45488 6.86671 5.28891 7.22556 5.19275C7.58441 5.09659 7.9587 5.07213 8.32701 5.12077C8.69532 5.16942 9.05042 5.29021 9.372 5.47624H9.37153ZM6.73388 7.21835C6.54638 7.54388 6.49567 7.9305 6.5929 8.29336C6.69012 8.65623 6.92733 8.96571 7.25247 9.15388C7.41305 9.24679 7.59037 9.30712 7.77429 9.33143C7.9582 9.35574 8.14511 9.34355 8.32431 9.29556C8.50351 9.24757 8.67149 9.16472 8.81864 9.05174C8.96579 8.93877 9.08923 8.7979 9.18188 8.63718C9.55883 7.98353 9.356 7.15435 8.73435 6.74494L8.66377 6.70118L8.59035 6.66165C8.26834 6.49988 7.89663 6.46742 7.55145 6.57093C7.20626 6.67444 6.91375 6.90608 6.73388 7.21835Z" fill="#6C6F73"></path></svg></div></div></div></div></div></div></template></div></html>
